# Phase 7: QA, Polish & Optimization

**Role:** Android QA / Engineer
**Skill:** `android-qa-verification`

## Objective
Verify the application against the technical specification, optimize performance, and ensure stability.

## References
*   `../technical_specification.md` (Section 3 Non-functional requirements)

## Instructions

1.  **Functional Verification**
    *   Execute the **Overlay Behaviour Matrix** tests manually on a real device.
    *   **Scenarios:**
        *   YouTube Video -> Overlay ON.
        *   YouTube Paused -> Overlay OFF.
        *   YouTube Ad (Video) -> Overlay ON.
        *   Home Screen (PiP) -> Overlay ON.
        *   Switch to another app -> Overlay OFF.
        *   Lock Screen -> Overlay OFF (System handles this, but verify no crash/glitch).
        *   Incoming Call -> Overlay OFF.

2.  **Performance Optimization**
    *   **Profiling:** Use Android Studio Profiler.
    *   **CPU:** Ensure Accessibility Monitor is not consuming high CPU (optimize polling/event filtering).
    *   **Memory:** Check for leaks, especially with the `OverlayManager` and `ComposeView`. Use LeakCanary.
    *   **Rendering:** Ensure Overlay draws at 60fps (or screen refresh rate).

3.  **Battery Usage**
    *   Verify `AudioFocusService` does not keep the device awake when screen is off (unless playing audio).
    *   Ensure listeners are unregistered when service stops.

4.  **Edge Cases**
    *   **Device Reboot:** Verify Service auto-starts (if implemented/desired, spec says "Recover gracefully after OS-initiated process termination", usually implies restart if sticky, but reboot requires `BOOT_COMPLETED`). *Note: Spec doesn't explicitly demand Boot start, but "Recover gracefully" suggests robustness.*
    *   **Permission Revocation:** Revoke permissions while app is running -> Verify App prompts user or handles gracefully (no crash).

5.  **Final Polish**
    *   Ensure smooth transitions (animations) for Overlay appearing/disappearing.
    *   Verify "Privacy" requirement: No data uploaded.
